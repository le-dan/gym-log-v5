{
  "version": 3,
  "sources": ["../../local-db-storage/src/waitRequest.js", "../../local-db-storage/src/DbStorage.js", "../../local-db-storage/index.js"],
  "sourcesContent": ["export default async function waitRequest(request, errorMessage) {\n    return new Promise((resolve, reject) => {\n        request.addEventListener(\"success\", () => {\n            resolve(request.result);\n        });\n        request.addEventListener(\"error\", () => {\n            reject(errorMessage);\n        });\n    });\n}\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _DbStorage_instances, _DbStorage_name, _DbStorage_db, _DbStorage_getStore, _DbStorage_getOrCreateDb, _DbStorage_openDb;\nimport waitRequest from \"./waitRequest.js\";\nclass DbStorage {\n    constructor({ name }) {\n        _DbStorage_instances.add(this);\n        _DbStorage_name.set(this, void 0);\n        _DbStorage_db.set(this, void 0);\n        __classPrivateFieldSet(this, _DbStorage_name, name, \"f\");\n    }\n    async getItem(key) {\n        const store = await __classPrivateFieldGet(this, _DbStorage_instances, \"m\", _DbStorage_getStore).call(this);\n        return waitRequest(store.get(key), \"Failed to get item\");\n    }\n    async setItem(key, value) {\n        const store = await __classPrivateFieldGet(this, _DbStorage_instances, \"m\", _DbStorage_getStore).call(this);\n        return waitRequest(store.put(value, key), \"Failed to set item\");\n    }\n    async removeItem(key) {\n        const store = await __classPrivateFieldGet(this, _DbStorage_instances, \"m\", _DbStorage_getStore).call(this);\n        return waitRequest(store.delete(key), \"Failed to remove item\");\n    }\n    async clear() {\n        const store = await __classPrivateFieldGet(this, _DbStorage_instances, \"m\", _DbStorage_getStore).call(this);\n        return waitRequest(store.clear(), \"Failed to clear store\");\n    }\n}\n_DbStorage_name = new WeakMap(), _DbStorage_db = new WeakMap(), _DbStorage_instances = new WeakSet(), _DbStorage_getStore = async function _DbStorage_getStore() {\n    const db = await __classPrivateFieldGet(this, _DbStorage_instances, \"m\", _DbStorage_getOrCreateDb).call(this);\n    return db.transaction(\"store\", \"readwrite\").objectStore(\"store\");\n}, _DbStorage_getOrCreateDb = async function _DbStorage_getOrCreateDb() {\n    if (__classPrivateFieldGet(this, _DbStorage_db, \"f\") === undefined) {\n        __classPrivateFieldSet(this, _DbStorage_db, __classPrivateFieldGet(this, _DbStorage_instances, \"m\", _DbStorage_openDb).call(this), \"f\");\n    }\n    return __classPrivateFieldGet(this, _DbStorage_db, \"f\");\n}, _DbStorage_openDb = async function _DbStorage_openDb() {\n    const request = indexedDB.open(__classPrivateFieldGet(this, _DbStorage_name, \"f\"), 1);\n    request.addEventListener(\"upgradeneeded\", () => {\n        // e.oldVersion\n        // e.newVersion\n        const db = request.result;\n        db.createObjectStore(\"store\");\n    });\n    return waitRequest(request, \"Failed to open IndexedDB\");\n};\nexport default DbStorage;\n", "import DbStorage from \"./src/DbStorage.js\";\nconst dbStorage = new DbStorage({ name: \"node_modules/local-db-storage\" });\nexport { DbStorage };\nexport default dbStorage;\n"],
  "mappings": "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",
  "names": ["_DbStorage_getStore", "_DbStorage_getOrCreateDb", "_DbStorage_openDb"]
}
